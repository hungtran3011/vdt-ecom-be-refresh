---
applyTo: '**'
---
The "VIETTEL MONEY Payment Gateway Connection Specification" document describes the technical details for connecting a Service Provider's Website/App (referred to as the Partner or Đối tác) with the Viettel Paygate 2.0. The primary objective is to allow customers to make online purchases or pay bills through the Partner's platform using the Viettel Money - VietQR Payment Gateway. This gateway is also known as Payment Gateway 2.0 (CTT 2.0)
.
Overview of Payment Methods and Access:
CTT 2.0 currently supports payment methods such as QR-Code and domestic cards (Napas)
. International cards (VISA/Mastercard/JCB) are also mentioned as supported methods in the document title and API descriptions. The integration allows customers to pay either by redirecting from the Partner's Web/App to the CTT Viettel website, displaying the CTT website within an iFrame/webview on the Partner's site, or by the Partner actively displaying a QR Code on their own Web/App. The interface is designed to be responsive across various screen sizes
.
Connection Model and Process Flow:
The connection involves communication between the Partner's system (Merchant Server/App) and Viettel's system (Viettel Server/Viettel Payment Web)
. There are two general processing flows outlined:
1.
Payment via CTT Viettel Web: The customer initiates a payment on the Partner's Web/App, which calls the Partner's server. The Partner's server calls Viettel's API to create a transaction, receives a redirection URL, and directs the customer's browser to the Viettel CTT web page to complete the payment
. After successful payment, the Viettel CTT web page redirects back to a specified URL on the Partner's system. Viettel also sends an Instant Payment Notification (IPN) to the Partner's server to confirm the transaction result
.
2.
Payment via Partner's Web/App (using QR Code): The customer initiates a payment on the Partner's Web/App, which calls the Partner's server. The Partner's server calls Viettel's API to create a transaction and receives a QR Code and signature from Viettel
. The Partner's Web/App displays this QR Code to the customer for scanning. After the customer scans and completes the payment via the Viettel Money App or another bank/e-wallet app, Viettel sends an IPN to the Partner's server to confirm the transaction result
.
Essential Data for Connection:
For integration, the Partner needs to provide specific information to Viettel, including:
•
The URL for the Order Confirmation API
.
•
The URL for the Receive Transaction Result API (IPN)
.
•
The URL for redirection after successful payment on the CTT web
.
•
The Partner's logo image
.
•
A short name for the Partner, used for display to the customer and in communications
.
•
The Partner's Public Key for digital signature verification by Viettel
.
•
Various configuration settings, such as default QR expiry time and the maximum number of IPN retries (0-100)
.
In turn, Viettel provides the Partner with:
•
A unique Merchant Code identifier
.
•
An Access Token for authenticating API calls to Viettel
. This token must be kept strictly confidential
.
•
The Signature Key (Viettel's Public Key), used by the Partner to verify the signature on messages received from Viettel
. The document provides specific Base64 encoded public keys for Sandbox, Pre-production, and Production environments
.
Integration Environments:
Viettel provides three separate environments for integration
:
•
Sandbox: For building, testing, and debugging features
.
•
Pre-production: For internal acceptance testing between the Partner and Viettel
.
•
Production: For actual end-user transactions
.
Partners need to whitelist or open network connections to specific IP addresses/domains for each environment
. The public URLs for each environment are provided
.
Key APIs Involved:
The integration relies on a set of APIs, some provided by Viettel and some required from the Partner
.
APIs Provided by Viettel:
These APIs are called by the Partner's server and require the Partner to include an Authorization: Bearer <Access Token> header and a Signature header in the request
. The Signature is generated by signing the exact JSON request body string using the Partner's Private Key. Responses from Viettel will also include a Signature header, which the Partner must verify using Viettel's Public Key and the exact JSON response body string
.
•
API Khởi tạo giao dịch (Transaction Initiation API): (POST /paybiz/payment-gateway/public/api/v2/create-transaction)
. This API is used by the Partner to initiate a new transaction. The request includes details like orderId, transAmount, description, and desired returnType (WEB, QR, DEEPLINK). The response provides the necessary url, qrCode, or deepLink depending on the requested type, along with a transaction status
.
•
API Hoàn tiền (Refund API): (POST /paybiz/payment-gateway/public/api/v3/merchant/refund-transaction)
. Used by the Partner to initiate a refund for a previously successful transaction. Requires transAmount, a Partner-generated orderId for the refund, and the originalRequestId (Viettel's transaction ID) of the original payment. Refunds are only supported for transactions originating from Bank accounts or Viettel Money, not other e-wallets, and only within a specified timeframe (1 month maximum)
.
•
API Truy vấn kết quả giao dịch (Query Transaction Result API): (POST /paybiz/payment-gateway/public/api/v3/merchant/search-transaction)
. Used by the Partner to check the status of a payment or refund transaction. The request can include either the Partner's orderId (for payment queries) or the Viettel originalRequestId (mandatory for refund queries). The response includes detailed transaction status, error code, amounts, and payment instrument details
.
APIs Required from the Partner:
These APIs are called by Viettel's server and must be provided by the Partner
. Incoming requests from Viettel will include a Signature header, which the Partner must verify using Viettel's Public Key and the exact request body JSON string. Responses from the Partner must include a Signature header generated by signing the response body JSON string using the Partner's Private Key
.
•
API Xác nhận thông tin đơn hàng (Order Confirmation API): (POST to a Partner-provided path)
. Viettel calls this API to validate the order information (e.g., existence, eligibility for payment) before proceeding with the transaction. The request includes orderId, merchantCode, transAmount, etc.. The Partner's response includes a code indicating the validation result ("00" for success, others for failure) and the orderId. The response must have an HTTP status of 200 SUCCESS if processing is successful
.
•
API Nhận kết quả giao dịch từ Viettel (Receive Transaction Result API / IPN): (POST to a Partner-provided path)
. Viettel calls this API to notify the Partner of the final transaction result after a payment is successful. This is a critical step for updating the Partner's internal order status [Instruction based on common integration practices, supported by the document flow]. The request contains detailed transaction information: transactionStatus, errorCode, orderId, vtRequestId, amounts, payment details, paymentDate, etc.. Viettel will retry this call multiple times (up to 'x' times, defined by the Partner, with 10-minute intervals) if no response is received. The Partner's response includes a code indicating successful receipt and processing ("00" for success) and the orderId. The response must have an HTTP status of 200 SUCCESS if processing is successful
.
•
URL nhận điều hướng về từ web CTT (Redirection URL from CTT Web): (GET to a Partner-provided path)
. This is the URL on the Partner's website that Viettel's CTT web page redirects the customer to after a transaction is completed. The transaction results (e.g., merchantCode, transactionStatus, orderId, errorCode, signature) are appended as query parameters. The Partner must verify the signature query parameter using Viettel's Public Key and the specific part of the query string used for signing (starting from the '?' or '&' before the signature parameter). This allows the Partner to display the result to the customer
.
Security Solution (Digital Signatures):
Communication between Viettel and the Partner uses ECDSA with SHA256 hashing for digital signing to ensure data integrity and prevent tampering
.
•
Signing Messages Sent to Viettel: When the Partner sends a request to Viettel, the Signature header is generated by signing the exact request body (as a string) using the Partner's Private Key
. For GET requests (like the redirection URL callback from the Partner's perspective), the message signed is the query string starting from the first '?' or '&' before the signature parameter
.
•
Verifying Messages Received from Viettel: When the Partner receives a response from Viettel (API response or incoming API call/redirection URL), the Signature header/parameter must be verified using Viettel's Public Key and the exact response body (as a string) or the relevant query string section for GET requests
. The document explicitly warns against reformatting the JSON body before verification, as this will cause signature mismatch errors
.
The document provides Java code examples for performing both signature verification
 and signing
.
Error Handling and Refunds:
The document references external Google Sheets documents for detailed lists of payment and refund error codes
. Regarding refunds, the document specifies the estimated time for customers to receive funds back depending on the original payment source (Viettel Money sources, linked bank accounts/domestic cards, or other bank accounts). Importantly, refunds are not supported for payments made using e-wallets other than Viettel Money.